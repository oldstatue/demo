<html>

<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<title> CyberStevens </title>
</head>

<body>

<div id="title-list"></div>

<script type="text/javascript">
var poemList = [];

function toggleText () {
	
}

var mainDisplay = document.getElementById('main-display');
var titleDisplay = document.getElementById('title-display');
var titleList = document.getElementById('title-list');

var xmlReq = new XMLHttpRequest();
xmlReq.open("GET", "./log.xml", true);
xmlReq.send();

xmlReq.onload = function () {
	var xmlDoc = xmlReq.responseXML;
	var poems = xmlDoc.getElementsByTagName("poem");

	for (var i = 0; i < poems.length; i ++) {
		poemList.push({
			title: xmlDoc.getElementsByTagName("title")[i].childNodes[0].nodeValue,
			text: xmlDoc.getElementsByTagName("text")[i].childNodes[0].nodeValue,
		});
	}

	for (var p of poemList) {
		let newContainer = document.createElement('div');

		let newTitle = document.createElement('a');
		newTitle.innerHTML = p.title;
		newTitle.href = "#";
		newContainer.appendChild(newTitle);

		newContainer.appendChild(document.createElement('br'));

		let newText = document.createElement('p');
		newText.innerHTML = p.text;
		newText.id = "text-el";
		//newText.style.display = "none";
		newText.style.height = "0px";
		newContainer.appendChild(newText);

		newTitle.onclick = function () {
			var textEl = this.parentNode.querySelector("#text-el");

			if (textEl.style.height == "0px") {
				textEl.style.height = textEl.scrollHeight + "px";
			} else {
				textEl.style.height = "0px";
			}
		}

		titleList.appendChild(newContainer);
	}
}
	
</script>

</body>

</html>



